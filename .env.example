# SENTRY Messenger - Environment Template
# Copy this file to .env and fill real values.
# Never commit real secrets.

# =============================================================
# 1) Basic Runtime (string / integer)
# =============================================================

# [integer] HTTP listen port
PORT=3000

# [string] Service name shown in logs/metrics
SERVICE_NAME=message-api

# [string] Service version label
SERVICE_VERSION=0.1.0


# =============================================================
# 2) URL / Origin (string URL or comma-separated origins)
# =============================================================

# [csv<string URL>] Allowed CORS origins, comma-separated
CORS_ORIGIN=https://sentry.red,https://app.sentry.red

# [string URL] Data Worker endpoint
DATA_API_URL=https://message-data.example.workers.dev

# [string URL] Portal API origin
PORTAL_API_ORIGIN=https://portal.sentry.red

# [string URL] R2/S3-compatible endpoint
S3_ENDPOINT=https://<accountid>.r2.cloudflarestorage.com


# =============================================================
# 3) Feature / Behavior Flags (boolean / number / list)
# =============================================================

# [boolean] Enable remote console forwarding (true/false)
REMOTE_CONSOLE_ENABLED=false

# [integer seconds] Presigned upload URL TTL
SIGNED_PUT_TTL=900

# [integer seconds] Presigned download URL TTL
SIGNED_GET_TTL=900

# [integer bytes] Max upload size per file
UPLOAD_MAX_BYTES=524288000

# [csv<string>] Allowed upload MIME types or groups
UPLOAD_ALLOWED_TYPES=image/*,video/*,audio/*,application/pdf

# [integer seconds] TURN credential TTL
TURN_TTL_SECONDS=3600


# =============================================================
# 4) Cloudflare Account / API (string identifiers + secret)
# =============================================================

# [string] Cloudflare account ID
CLOUDFLARE_ACCOUNT_ID=

# [string email] Cloudflare login email
CLOUDFLARE_EMAIL=

# [secret string] Cloudflare global API key
CLOUDFLARE_API_KEY=


# =============================================================
# 5) Storage / Bucket Identity (string)
# =============================================================

# [string] S3 region (Cloudflare R2 usually "auto")
S3_REGION=auto

# [string] R2/S3 bucket name
S3_BUCKET=message-media


# =============================================================
# 6) Service & App Secrets (secret string)
# =============================================================

# [secret string] API invite token HMAC/validation key
INVITE_TOKEN_KEY=

# [secret string] Data API HMAC key used between services
DATA_API_HMAC=

# [secret string] WebSocket JWT signing key (>= 32 chars)
WS_TOKEN_SECRET=

# [secret string] Account-level HMAC key
ACCOUNT_HMAC_KEY=

# [secret string] Portal HMAC secret
PORTAL_HMAC_SECRET=

# [secret string] S3 access key
S3_ACCESS_KEY=

# [secret string] S3 secret key
S3_SECRET_KEY=


# =============================================================
# 7) Cloudflare TURN/SFU Token Credentials (id + secret)
# =============================================================

# [string] TURN token ID
CLOUDFLARE_TURN_TOKEN_ID=

# [secret string] TURN token key
CLOUDFLARE_TURN_TOKEN_KEY=

# [string] SFU token ID
CLOUDFLARE_SFU_TOKEN_ID=

# [secret string] SFU token key
CLOUDFLARE_SFU_TOKEN_KEY=


# =============================================================
# 8) NTAG424 Crypto Settings (hex/string/integer)
# =============================================================

# [secret hex] NTAG424 master key (expected hex)
NTAG424_KM=

# [string enum] Key derivation mode: HKDF or EV2
NTAG424_KDF=HKDF

# [string] HKDF salt
NTAG424_SALT=sentry.red

# [string] HKDF info
NTAG424_INFO=ntag424-slot-0

# [integer] NTAG key version
NTAG424_KVER=1


# =============================================================
# 9) OPAQUE / PAKE Material (secret + identifier)
# =============================================================

# [secret hex] OPRF seed (expected hex)
OPAQUE_OPRF_SEED=

# [secret base64] AKE private key
OPAQUE_AKE_PRIV_B64=

# [string base64/public] AKE public key
OPAQUE_AKE_PUB_B64=

# [string] OPAQUE server identifier
OPAQUE_SERVER_ID=api.sentry


# =============================================================
# 10) PEM / Public Key Material (multiline string)
# =============================================================

# [string PEM] Public key PEM text (keep literal \n if single-line env)
PRIVATE_KEY_PUBLIC_PEM=
